var controller={clientW:null,clientH:null,urlBuffer:[],$picCon:$("#picsets .columns"),init:function(){var e=this;e.clientW=document.documentElement.clientWidth||document.body.clientWidth,e.clientH=document.documentElement.clientHeight||document.body.clientHeight,e.preLoadImg(),e.firstScreen(),e.aplayerMode(),e.event()},firstScreen:function(){$(".cover-bg").css("height",this.clientH+"px"),$('[data-toggle="popover"]').popover({container:"body",html:!0,trigger:"focus",placement:"left",content:function(){var e=this.getAttribute("data-v");return'<img src="images/'+e+'.jpg" alt='+e+' width="150" height="150">'}})},aplayerMode:function(){var e=$(".cover-bg meting-js");this.clientW<=768&&e.hide()},reqImage:function(e){var t=0<arguments.length&&void 0!==e?e:"",r=this,c=$("#picsets .columns");$.get({type:"GET",contentType:"application/json;charset=UTF-8",url:"http://localhost:8888/pic"+t,success:function(e){function t(e){var t=i[e];if(-1!=r.urlBuffer.indexOf(t))return o=!0,"break";r.urlBuffer.push(t);var n=new Image;n.onload=setTimeout(function(){c.append('<figure style="display:none"><img src='+t+"></figure>"),c.find("img").addClass("hvr-grow"),c.find("figure").fadeIn(1e3)},200*e),n.onerror=function(e){console.log(e)},n.src=t}for(var o=!1,i=e,n=0;n<i.length;n++){if("break"===t(n))break}o&&$("#more").hide()},error:function(e){console.log(e.status),console.log(e.responseText)}})},preLoadImg:function(){this.reqImage("?code=1"),$("#more").fadeIn()},lazyLoad:function(n){var o=this;return function(){var e=document.documentElement.scrollTop||document.body.scrollTop,t=window.innerHeight;n.offsetTop<t+e&&o.reqImage()}},event:function(){var t,n,o,e=document.getElementById("more");window.onscroll=(t=this.lazyLoad(e),n=200,o=Date.now(),function(){var e=Date.now();n<e-o&&(o=e,t.apply(this,arguments))})}};$(function(){controller.init()});